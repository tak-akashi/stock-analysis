---
description: アイデア壁打ち → docs/ideas/に保存
---

# ブレインストーミング（対話型アイデア整理）

**目的:** ユーザーと対話しながらアイデアを練り、`docs/ideas/`に要件ドキュメントとして保存します。

**引数:** `$ARGUMENTS`

**使用方法:**
```
/brainstorm                          # 新規モード（対話でアイデアを整理）
/brainstorm docs/ideas/xxx.md        # 深掘りモード（既存アイデアを壁打ち）
/brainstorm ai-drill-maker-base      # ファイル名のみでも検索可能
```

---

## フェーズ0: モード判定

1. **引数の確認**
   - 引数がない、または新しいアイデアのキーワードのみ → **新規モード**（フェーズ1へ）
   - 既存ファイルパスまたはファイル名が指定された → **深掘りモード**（フェーズ0-Aへ）

### フェーズ0-A: 既存ファイルの特定（深掘りモードの場合）

1. **ファイル検索**
   - 引数がフルパスの場合: そのファイルを使用
   - 引数がファイル名のみの場合:
     ```
     Glob('docs/ideas/*{引数}*.md')
     ```
   - 見つからない場合は広範囲検索:
     ```
     Glob('**/*{引数}*.md')
     ```

2. **候補の確認**
   - 1件: そのファイルで深掘りモードを開始
   - 複数件: ユーザーにどれを使うか確認
   - 0件: 新規モードに切り替えるか確認

→ ファイルが特定できたら **フェーズD1（深掘りモード）** へ

---

# 新規モード（引数なし or 新しいアイデア）

## フェーズ1: コンテキスト理解

1. **プロジェクト情報の読み込み**
   - `CLAUDE.md`を読み、プロジェクトの全体像を把握
   - `docs/core/architecture.md`があれば読み込み、現在のアーキテクチャを理解

2. **既存アイデアの確認**
   ```
   Glob('docs/ideas/*.md')
   ```
   - 関連するアイデアがないか確認
   - 重複を避ける

---

## フェーズ2: 対話型ブレインストーミング

**重要:** このフェーズは複数ターンの対話です。ユーザーが「保存して」「まとめて」などと言うまで対話を続けます。

### 対話の進め方

1. **問題定義を明確にする質問**
   - 「どのような問題を解決したいですか？」
   - 「現在どのような課題がありますか？」
   - 「誰がこの機能を使いますか？」

2. **解決策を深掘りする質問**
   - 「どのような解決方法を考えていますか？」
   - 「既存の機能で近いものはありますか？」
   - 「必須の要件と、あれば良い要件を分けると？」

3. **スコープを明確にする質問**
   - 「今回実装する範囲は？」
   - 「後回しにできるものは？」
   - 「MVPとして最小限必要なものは？」

4. **技術的な観点からの質問**
   - 「既存のコンポーネントで再利用できそうなものは？」
   - 「パフォーマンスやスケーラビリティの要件は？」
   - 「外部依存（API、ライブラリ等）は必要ですか？」

### 対話のルール

- ユーザーの発言を要約し、理解が正しいか確認する
- 曖昧な点は具体例を挙げて確認する
- 提案がある場合は根拠とともに示す
- 複数の選択肢がある場合はメリット・デメリットを整理する

---

## フェーズ3: 要件の整理と保存

**トリガー:** ユーザーが「保存して」「まとめて」「ドキュメント化して」などと発言した時

### ステップ1: テンプレート読み込み

```
Read('.claude/skills/steering/templates/idea.md')
```

### ステップ2: 内容の整理

対話で得た情報を以下の構造に整理:

1. **概要**: 1-2文で機能を説明
2. **背景**: 課題と解決したいこと
3. **解決策**: アプローチと代替案の比較
4. **実装する機能**: 具体的な機能リスト
5. **受け入れ条件**: 検証可能な条件（チェックリスト形式）
6. **スコープ外**: 今回実装しないもの
7. **技術的考慮事項**: 影響範囲とリスク

### ステップ3: ファイル名の決定

```
docs/ideas/[YYYYMMDD]-[機能名のケバブケース].md
```

例:
- `docs/ideas/20250123-slack-notification-enhancement.md`
- `docs/ideas/20250123-youtube-subtitle-support.md`

### ステップ4: ファイル保存

```
Write('docs/ideas/[YYYYMMDD]-[機能名].md', 整理した内容)
```

### ステップ5: 確認と次のステップの提示

保存完了後、以下を伝える:

```
アイデアを `docs/ideas/[ファイル名]` に保存しました。

次のステップ:
1. `/gen-all-docs` - プロジェクトドキュメントを生成
2. `/plan-feature --from-idea [ファイル名]` - 実装計画を作成
3. `/implement-feature --from-idea [ファイル名]` - 実装を開始
```

---

## 出力形式

### アイデアドキュメントの構造

```markdown
# {機能名}

> 作成日: YYYY-MM-DD
> ステータス: draft

## 概要
{1-2文での説明}

## 背景
### 現状の課題
{課題の説明}

### 解決したいこと
{目標}

## 解決策
### アプローチ
{採用するアプローチ}

### 代替案と比較
{検討した代替案}

## 実装する機能
### 機能1: {名前}
- {説明}

## 受け入れ条件
### {機能1}
- [ ] {条件1}
- [ ] {条件2}

## スコープ外
- {対象外1}

## 技術的考慮事項
### 影響範囲
- {影響モジュール}

### リスクと対策
- **リスク1**: {内容} → **対策**: {対策}
```

---

## 注意事項

- 対話中は結論を急がず、ユーザーの思考を引き出す
- 技術的に実現困難な提案には、代替案とともに指摘する
- 既存のアーキテクチャとの整合性を意識する
- 受け入れ条件は検証可能で具体的な形にする

---

## 重要: このスキルのスコープ

**このスキル (`/brainstorm`) の役割は、アイデアを `docs/ideas/` に保存するまでです。**

- ユーザーが完成したプラン/要件を渡してきた場合も、必ず `docs/ideas/` に保存する
- 「Implement」「実装して」などの言葉が含まれていても、このスキル内では実装しない
- 実装に移る場合は、ユーザーに `/implement-feature` の使用を案内する

**禁止事項:**
- このスキル内でコードを書く
- このスキル内でファイル（docs/ideas/以外）を作成・編集する
- 実装の詳細な計画を立てる（概要レベルまで）

**セッション終了後の案内（必須）:**
```
アイデアを `docs/ideas/[ファイル名]` に保存しました。

次のステップ:
- ドキュメント生成: `/gen-all-docs`
- 実装計画を作成: `/plan-feature --from-idea [ファイル名]`
- 実装を開始: `/implement-feature --from-idea [ファイル名]`
```

---

# 深掘りモード（既存アイデアがある場合）

## フェーズD1: ドキュメント分析

### ステップ1: ファイル読み込み

```
Read('{指定されたファイルパス}')
```

### ステップ2: 構造分析

- セクション構成を把握
- 各セクションの充実度を評価（十分/不足/空欄）
- ドキュメントのステータス（draft/review/approved）を確認

### ステップ3: 矛盾・課題の検出

以下の観点でチェック:

**整合性チェック:**
- [ ] 概要と詳細の一貫性
- [ ] スコープ内/外の明確さ
- [ ] 目標とKPI（受け入れ条件）の整合性
- [ ] ユースケースと機能の対応
- [ ] 制約と実装の整合性

**充実度チェック:**
- [ ] 曖昧な用語・定義
- [ ] 具体例の不足
- [ ] 検討不足の領域（セキュリティ、エラー処理、エッジケース等）
- [ ] 代替案の検討有無

**実現可能性チェック:**
- [ ] 技術的に実現可能か
- [ ] 既存アーキテクチャとの整合性
- [ ] 依存関係の明確さ

### ステップ4: 分析結果の提示

発見した課題を優先度順に提示し、最も重要な点から対話を開始する。

**出力例:**
```
## `docs/ideas/ai-drill-maker-base.md` の分析結果

このドキュメントを分析しました。以下の点について深掘りしていきましょう。

### 要確認事項（優先度順）

1. **[矛盾]** 〜と〜の間に整合性の問題があります
2. **[曖昧]** 〜の定義が不明確です
3. **[不足]** 〜のケースが検討されていません
4. **[提案]** 〜を追加することで明確になります

---

まず、1番目の点から確認させてください。
〜について、〜という記述がありますが...
```

---

## フェーズD2: 壁打ち対話

**重要:** ユーザーが「更新して」「反映して」「保存して」などと言うまで対話を続けます。

### 対話の進め方

1. **課題の確認**
   - 「〜について、〜という記述がありますが、〜との整合性はどうでしょうか？」
   - 「〜が曖昧に感じます。具体的にはどのようなケースを想定していますか？」
   - 「〜と〜は矛盾しているように見えますが、どちらが正しいですか？」

2. **深掘り質問**
   - 「なぜ〜を選択しましたか？代替案は検討しましたか？」
   - 「〜のケースではどう対応しますか？」
   - 「〜の優先度はどの程度ですか？」
   - 「〜が失敗した場合はどうなりますか？」

3. **補完提案**
   - 「〜という観点が不足しているように見えます」
   - 「〜を追加することで〜が明確になります」
   - 「〜という代替アプローチも考えられますが、いかがですか？」

### 対話のルール

- **一度に多くの指摘をしない**（1-2点ずつ）
- ユーザーの回答を要約して確認
- 新しい決定事項を内部的にメモ
- 対話が進んだら次の課題に移る
- ユーザーが「他には？」と聞いたら次の課題を提示

### 対話中の記録

内部的に以下を記録（ユーザーには見せない）:
- 確認できた事項
- 変更が必要な箇所
- 追加すべき内容
- 削除・修正すべき内容

---

## フェーズD3: ドキュメント更新

**トリガー:** 「更新して」「反映して」「保存して」「まとめて」などの発言

### ステップ1: 変更内容の整理

対話で決まった内容を整理し、ユーザーに確認:

```
以下の内容で更新します:

**追加:**
- 〜セクションに〜を追加
- 〜の具体例を追加

**修正:**
- 〜の記述を〜に変更
- 〜と〜の整合性を修正

**その他:**
- 更新履歴に本日の変更を追記

よろしいですか？
```

### ステップ2: ファイル更新

1. **元ファイルを更新**（Edit使用）
   - 各変更箇所を順次編集

2. **更新履歴セクションを追加/追記**
   ```markdown
   ## 更新履歴
   - YYYY-MM-DD: 〜を追記、〜を修正（壁打ちセッション）
   ```

### ステップ3: 確認と次のステップ

```
`docs/ideas/[ファイル名]` を更新しました。

**更新内容:**
- 〜を追記
- 〜を修正
- 〜の整合性を改善

**次のステップ:**
- 引き続き深掘り: `/brainstorm [ファイル名]`
- ドキュメント生成: `/gen-all-docs`
- 実装計画を作成: `/plan-feature --from-idea [ファイル名]`
- 実装を開始: `/implement-feature --from-idea [ファイル名]`
```

---

## 深掘りモードの注意事項

- 元のドキュメントの構造を尊重する（大幅な構造変更は避ける）
- 対話で得た情報のみを反映する（勝手に内容を追加しない）
- 変更箇所は明確に示し、ユーザーの承認を得てから更新する
- 深掘りモードでも実装は行わない（新規モードと同じルール）
